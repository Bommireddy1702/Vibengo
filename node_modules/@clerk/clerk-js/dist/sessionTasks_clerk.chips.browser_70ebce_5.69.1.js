"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["877"],{3983:function(e,t,n){n.r(t),n.d(t,{SessionTask:()=>_});var r=n(9109),i=n(3799),a=n(2810),o=n(9144),s=n(4455),c=n(2672),l=n(1455),d=n(6663),u=n(1576),Z=n(6988),h=n(4676),p=n(9541),g=n(1816),$=n(5536),k=n(7484);let S=(0,c.withCardStateProvider)(()=>{let{userMemberships:e,userInvitations:t,userSuggestions:n}=(0,i.eW)(k.AO),a=e?.isLoading||t?.isLoading||n?.isLoading,o=!!(e?.count||t?.count||n?.count);return a?(0,r.tZ)(f,{children:(0,r.tZ)(T,{})}):o?(0,r.tZ)(x,{}):(0,r.tZ)(C,{})}),x=()=>{let[e,t]=(0,o.useState)(!1);return(0,r.tZ)(u.OrganizationListContext.Provider,{value:{componentName:"OrganizationList",skipInvitationScreen:!0},children:(0,r.tZ)(f,{children:e?(0,r.tZ)(p.Box,{sx:e=>({padding:`${e.space.$none} ${e.space.$5} ${e.space.$5}`}),children:(0,r.tZ)(g.$,{flow:"default",startPage:{headerTitle:(0,p.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0,onCancel:()=>t(!1)})}):(0,r.tZ)($.S,{onCreateOrganizationClick:()=>t(!0)})})})},C=()=>(0,r.tZ)(f,{children:(0,r.tZ)(p.Box,{sx:e=>({padding:`${e.space.$none} ${e.space.$5} ${e.space.$5}`}),children:(0,r.tZ)(g.$,{flow:"default",startPage:{headerTitle:(0,p.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0})})}),f=({children:e})=>{let t=(0,c.useCardState)();return(0,r.BX)(s.Z.Root,{children:[(0,r.BX)(s.Z.Content,{sx:e=>({padding:`${e.space.$8} ${e.space.$none} ${e.space.$none}`}),children:[(0,r.tZ)(s.Z.Alert,{sx:e=>({margin:`${e.space.$none} ${e.space.$5}`}),children:t.error}),e]}),(0,r.tZ)(s.Z.Footer,{})]})},T=()=>(0,r.tZ)(p.Flex,{direction:"row",center:!0,sx:e=>({height:"100%",minHeight:e.sizes.$60}),children:(0,r.tZ)(p.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:p.descriptors.spinner})}),m=()=>{let e=(0,i.cL)(),{navigate:t}=(0,h.useRouter)(),{redirectUrlComplete:n}=(0,Z.G)();return(0,o.useEffect)(()=>{let t=setTimeout(()=>{e.__experimental_navigateToTask({redirectUrlComplete:n})},500);return()=>clearTimeout(t)},[t,e,n]),(0,r.BX)(s.Z.Root,{children:[(0,r.tZ)(s.Z.Content,{children:(0,r.tZ)(l.I,{})}),(0,r.tZ)(s.Z.Footer,{})]})};function v(){return(0,r.BX)(h.Switch,{children:[(0,r.tZ)(h.Route,{path:d.m.org,children:(0,r.tZ)(S,{})}),(0,r.tZ)(h.Route,{index:!0,children:(0,r.tZ)(m,{})})]})}let _=(0,c.withCardStateProvider)(()=>{let e=(0,i.cL)(),{navigate:t}=(0,h.useRouter)(),n=(0,o.useContext)(u.SignInContext),c=(0,o.useContext)(u.SignUpContext),[d,p]=(0,o.useState)(!1),g=n?.afterSignInUrl??c?.afterSignUpUrl??e?.buildAfterSignInUrl();(0,o.useEffect)(()=>{if(d)return;let n=e.session?.currentTask;if(!n||e.session?.status==="active"){t(g);return}e.telemetry?.record(a.Zg("SessionTask",{task:n.key}))},[e,t,d,g]);let $=(0,o.useCallback)(()=>(p(!0),e.__experimental_navigateToTask({redirectUrlComplete:g}).finally(()=>p(!1))),[e,g]);return e.session?.currentTask?(0,r.tZ)(Z.H.Provider,{value:{nextTask:$,redirectUrlComplete:g},children:(0,r.tZ)(v,{})}):(0,r.BX)(s.Z.Root,{children:[(0,r.tZ)(s.Z.Content,{children:(0,r.tZ)(l.I,{})}),(0,r.tZ)(s.Z.Footer,{})]})})}}]);