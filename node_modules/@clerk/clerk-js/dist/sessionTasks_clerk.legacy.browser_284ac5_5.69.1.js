"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["877"],{13983:function(e,t,n){n.r(t),n.d(t,{SessionTask:()=>_}),n(65223),n(38062),n(50725);var i=n(79109),o=n(83799),r=n(72810),a=n(69144),l=n(44455),c=n(2672),s=n(21455),d=n(76663),u=n(11576),Z=n(86988),h=n(24676),v=n(39541),p=n(91816),g=n(85536),k=n(57484);let S=(0,c.withCardStateProvider)(()=>{let{userMemberships:e,userInvitations:t,userSuggestions:n}=(0,o.eW)(k.AO),r=(null==e?void 0:e.isLoading)||(null==t?void 0:t.isLoading)||(null==n?void 0:n.isLoading),a=!!((null==e?void 0:e.count)||(null==t?void 0:t.count)||(null==n?void 0:n.count));return r?(0,i.tZ)(f,{children:(0,i.tZ)(T,{})}):a?(0,i.tZ)(x,{}):(0,i.tZ)(C,{})}),x=()=>{let[e,t]=(0,a.useState)(!1);return(0,i.tZ)(u.OrganizationListContext.Provider,{value:{componentName:"OrganizationList",skipInvitationScreen:!0},children:(0,i.tZ)(f,{children:e?(0,i.tZ)(v.Box,{sx:e=>({padding:"".concat(e.space.$none," ").concat(e.space.$5," ").concat(e.space.$5)}),children:(0,i.tZ)(p.$,{flow:"default",startPage:{headerTitle:(0,v.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0,onCancel:()=>t(!1)})}):(0,i.tZ)(g.S,{onCreateOrganizationClick:()=>t(!0)})})})},C=()=>(0,i.tZ)(f,{children:(0,i.tZ)(v.Box,{sx:e=>({padding:"".concat(e.space.$none," ").concat(e.space.$5," ").concat(e.space.$5)}),children:(0,i.tZ)(p.$,{flow:"default",startPage:{headerTitle:(0,v.localizationKeys)("organizationList.createOrganization")},skipInvitationScreen:!0})})}),f=e=>{let{children:t}=e,n=(0,c.useCardState)();return(0,i.BX)(l.Z.Root,{children:[(0,i.BX)(l.Z.Content,{sx:e=>({padding:"".concat(e.space.$8," ").concat(e.space.$none," ").concat(e.space.$none)}),children:[(0,i.tZ)(l.Z.Alert,{sx:e=>({margin:"".concat(e.space.$none," ").concat(e.space.$5)}),children:n.error}),t]}),(0,i.tZ)(l.Z.Footer,{})]})},T=()=>(0,i.tZ)(v.Flex,{direction:"row",center:!0,sx:e=>({height:"100%",minHeight:e.sizes.$60}),children:(0,i.tZ)(v.Spinner,{size:"xl",colorScheme:"primary",elementDescriptor:v.descriptors.spinner})}),$=()=>{let e=(0,o.cL)(),{navigate:t}=(0,h.useRouter)(),{redirectUrlComplete:n}=(0,Z.G)();return(0,a.useEffect)(()=>{let t=setTimeout(()=>{e.__experimental_navigateToTask({redirectUrlComplete:n})},500);return()=>clearTimeout(t)},[t,e,n]),(0,i.BX)(l.Z.Root,{children:[(0,i.tZ)(l.Z.Content,{children:(0,i.tZ)(s.I,{})}),(0,i.tZ)(l.Z.Footer,{})]})};function m(){return(0,i.BX)(h.Switch,{children:[(0,i.tZ)(h.Route,{path:d.m.org,children:(0,i.tZ)(S,{})}),(0,i.tZ)(h.Route,{index:!0,children:(0,i.tZ)($,{})})]})}let _=(0,c.withCardStateProvider)(()=>{var e,t,n;let c=(0,o.cL)(),{navigate:d}=(0,h.useRouter)(),v=(0,a.useContext)(u.SignInContext),p=(0,a.useContext)(u.SignUpContext),[g,k]=(0,a.useState)(!1),S=null!==(n=null!==(t=null==v?void 0:v.afterSignInUrl)&&void 0!==t?t:null==p?void 0:p.afterSignUpUrl)&&void 0!==n?n:null==c?void 0:c.buildAfterSignInUrl();(0,a.useEffect)(()=>{var e,t,n;if(g)return;let i=null===(e=c.session)||void 0===e?void 0:e.currentTask;if(!i||(null===(t=c.session)||void 0===t?void 0:t.status)==="active"){d(S);return}null===(n=c.telemetry)||void 0===n||n.record((0,r.Zg)("SessionTask",{task:i.key}))},[c,d,g,S]);let x=(0,a.useCallback)(()=>(k(!0),c.__experimental_navigateToTask({redirectUrlComplete:S}).finally(()=>k(!1))),[c,S]);return(null===(e=c.session)||void 0===e?void 0:e.currentTask)?(0,i.tZ)(Z.H.Provider,{value:{nextTask:x,redirectUrlComplete:S},children:(0,i.tZ)(m,{})}):(0,i.BX)(l.Z.Root,{children:[(0,i.tZ)(l.Z.Content,{children:(0,i.tZ)(s.I,{})}),(0,i.tZ)(l.Z.Footer,{})]})})}}]);